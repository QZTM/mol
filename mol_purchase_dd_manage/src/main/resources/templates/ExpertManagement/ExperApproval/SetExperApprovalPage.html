<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<link rel="stylesheet" href="/layui/css/layui.css">
<script src="/echarts.min.js"></script>
<script src="http://libs.baidu.com/jquery/1.9.0/jquery.js" type="text/javascript"></script>
<body id="body" onload="Landing_start()" ><!--专家资料审核-->
<p id="ExperId" style="display: none" th:text="${ExperId}"></p>
<div style="padding: 12px;" >

    <div style="width: 100%;height: 80px;">
        <div style="width: 100%; height: 40px;">
            <div style="float:left; width: 150px;height: 35px;background-color:#2D93CA;border-radius: 6px;font-size: 20px;text-align:center;color:#fbfbfb;">
                <p style="margin-top: 3px">专家资料审核</p>
            </div>
        </div>
    </div>

    <div>
        <hr class="layui-bg-green">
    </div>
    <div>
        <div style="width: 100%;height: 40px;margin-top: 24px">
            <div style="float:left;width: 120px; height: 30px;background-color:#2D93CA;border-radius: 6px;font-size: 16px;text-align:center;color:#fbfbfb;">
                <p style="margin: 4px">专家姓名</p>
            </div>
            <input id="input_name" style="margin-left: 16px;float:left;width: 35%;height: 26px;font-size: 16px" type="text"  disabled>

            <div style="float:left;width: 120px; height: 30px;background-color:#2D93CA;border-radius: 6px;font-size: 16px;text-align:center;color:#fbfbfb;margin-left: 5%">
                <p style="margin: 4px">出生日期</p>
            </div>
            <input id="input_birthday" style="margin-left: 16px;float:left;width: 35%;height: 26px;font-size: 16px" type="text" placeholder="" disabled>
        </div>

        <div style="width: 100%;height: 40px;margin-top: 24px">
            <div style="float:left;width: 120px; height: 30px;background-color:#2D93CA;border-radius: 6px;font-size: 16px;text-align:center;color:#fbfbfb;">
                <p style="margin: 4px">年龄</p>
            </div>
            <input id="input_age" style="margin-left: 16px;float:left;width: 35%;height: 26px;font-size: 16px" type="text" placeholder="" disabled>

            <div style="float:left;width: 120px; height: 30px;background-color:#2D93CA;border-radius: 6px;font-size: 16px;text-align:center;color:#fbfbfb;margin-left: 5%">
                <p style="margin: 4px">工作年限</p>
            </div>
            <input id="input_work_life" style="margin-left: 16px;float:left;width: 35%;height: 26px;font-size: 16px" type="text" placeholder="" disabled>
        </div>

        <div style="width: 100%;height: 40px;margin-top: 24px">
            <div style="float:left;width: 120px; height: 30px;background-color:#2D93CA;border-radius: 6px;font-size: 16px;text-align:center;color:#fbfbfb;">
                <p style="margin: 4px">身份证号码</p>
            </div>
            <input id="input_id_number" style="margin-left: 16px;float:left;width: 35%;height: 26px;font-size: 16px" type="text"  placeholder="" disabled>

            <div style="float:left;width: 120px; height: 30px;background-color:#2D93CA;border-radius: 6px;font-size: 16px;text-align:center;color:#fbfbfb;margin-left: 5%">
                <p style="margin: 4px">所属行业</p>
            </div>
            <input id="input_industry" style="margin-left: 16px;float:left;width: 35%;height: 26px;font-size: 16px" type="text" placeholder="" disabled>
        </div>

        <div style="margin-top: 24px">
            <div style="width: 100%;height: 35px">
                <div style="float:left;width: 120px; height: 30px;background-color:#2D93CA;border-radius: 6px;font-size: 16px;text-align:center;color:#fbfbfb;">
                    <p style="margin: 4px">身份证材料</p>
                </div>
            </div>
            <div style="width: 95%;height:  200px;border-radius: 6px;border:1px solid #B2B2B2;">
                <div  style="float: left;margin: 24px"><!--身份证正面-->
                    <img id="img_front_of_id" class="pimg" alt="Base64 encoded image" src="/imge/file.ico" style="height: 140px;width: 120px;">
                </div>
                <div  style="float: left;margin: 24px"><!--身份证反面-->
                    <img id="img_reverse_of_id" class="pimg" alt="Base64 encoded image" src="/imge/file.ico" style="height: 140px;width: 120px;">
                </div>
            </div>
        </div>

        <div style="margin-top: 24px">
            <div style="width: 100%;height: 35px">
                <div style="float:left;width: 120px; height: 30px;background-color:#2D93CA;border-radius: 6px;font-size: 16px;text-align:center;color:#fbfbfb;">
                    <p style="margin: 4px">名片材料</p>
                </div>
            </div>
            <div style="width: 95%;height:  200px;border-radius: 6px;border:1px solid #B2B2B2;">
                <div  style="float: left;margin: 24px"> <!--名片正面-->
                    <img id="img_front_of_business" class="pimg" src="/imge/file.ico" style="height: 140px;width: 120px;">
                </div>
                <div  style="float: left;margin: 24px"><!--名片反面-->
                    <img id="img_reverse_of_business" class="pimg" src="/imge/file.ico" style="height: 140px;width: 120px;">
                </div>
            </div>
        </div>

        <div style="margin-top: 24px">
            <div style="width: 100%;height: 35px">
                <div style="float:left;width: 120px; height: 30px;background-color:#2D93CA;border-radius: 6px;font-size: 16px;text-align:center;color:#fbfbfb;">
                    <p style="margin: 4px">其它材料</p>
                </div>
            </div>
            <div style="width: 95%;height:  200px;border-radius: 6px;border:1px solid #B2B2B2;">
                <div  style="float: left;margin: 24px"><!--其它材料1-->
                    <img id="img_other_documents_one" class="pimg" src="/imge/file.ico" style="height: 140px;width: 120px;">
                </div>
                <div  style="float: left;margin: 24px"><!--其它材料2-->
                    <img id="img_other_documents_two" class="pimg" src="/imge/file.ico" style="height: 140px;width: 120px;">
                </div>
            </div>
        </div>
        <div>
            <div style="width: 50%;height: 60px;margin:  0 auto;margin-top: 36px">
                <div style="float: left;border-radius: 6px;background-color: #2D93CA;color:#fbfbfb;width: 120px;height:40px;font-size: 24px;text-align: center;cursor:pointer" onclick="Adopt()">
                    <p>通 过</p>
                </div>
                <div style="float: left;margin-left: 10%;border-radius: 6px;background-color: #3F3F3F;color:#fbfbfb;width: 120px;height:40px;font-size: 24px;text-align: center;cursor:pointer" onclick="Refuse()">
                    <p>拒 绝</p>
                </div>
                <div style="float: left;margin-left: 10%;border-radius: 6px;background-color:#eb7350;color:#fbfbfb;width: 120px;height:40px;font-size: 24px;text-align: center;cursor:pointer" onclick="return_top()">
                    <p>返 回</p>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="outerdiv" style="position:fixed;top:0;left:0;background:rgba(0,0,0,0.7);z-index:2;width:100%;height:100%;display:none;">
    <div id="innerdiv" style="position:absolute;">
        <img id="bigimg" style="border:5px solid #fff;" src="" />
    </div>
</div>


<script src="/layui/layui.all.js"></script>
<script>

    function Landing_start()
    {
        $.ajax({
            type:'post',
            data:{"id":document.getElementById("ExperId").innerText}, //传送指定的专家id
            dataType:'json',
            url: "/ExperManagement/SetExperApproval/setExperApprovalben",
            success: function(data) {
                document.getElementById("input_name").value=data.name;
                document.getElementById("input_birthday").value=data.birthday;
                document.getElementById("input_age").value=data.age;
                document.getElementById("input_work_life").value=data.work_life;
                document.getElementById("input_id_number").value=data.id_number;
                document.getElementById("input_industry").value=data.industry;
                //将图片的Base64编码设置给src
                $("#img_front_of_id").attr("src","data:image/png;base64,"+data.front_of_id);
                $("#img_reverse_of_id").attr("src","data:image/png;base64,"+data.reverse_of_id);
                $("#img_front_of_business").attr("src","data:image/png;base64,"+data.front_of_business);
                $("#img_reverse_of_business").attr("src","data:image/png;base64,"+data.reverse_of_business);
                $("#img_other_documents_one").attr("src","data:image/png;base64,"+data.other_documents_one);
                $("#img_other_documents_two").attr("src","data:image/png;base64,"+data.other_documents_two);
            },
            error:function(data){
                alert('响应失败！');
            }
        });
    }
    function File_upload(url,upload_type_id)//上传文件的方法，参数 url controller地址 上传文件类型的div id 如名片div的id 或者 身份材料的divid
    {
        var form = new FormData(document.getElementById(upload_type_id));//"domeform"
        $.ajax({
            url: url,//"/File_Receive/Receive_default_file",
            type: "post",
            data: form,
            processData: false,
            contentType: false,
            success: function(data) {
                alert("123456")
            },
            error: function(e) {
                console.log(e);
            }
        });
    }


    layui.use(['form', 'layedit', 'laydate'], function(){
        var form = layui.form
            ,layer = layui.layer
            ,layedit = layui.layedit
            ,laydate = layui.laydate;
        //日期
        laydate.render({
            elem: '#date'
        });
        laydate.render({
            elem: '#date1'
        });

    });
    function  Save_form()
    {
        File_upload("/File_Receive/Receive_default_file","domeform")
    }


    $(document).ready(function(){
        $(".pimg").click(function(){
            var _this = $(this);//将当前的pimg元素作为_this传入函数
            imgShow("#outerdiv", "#innerdiv", "#bigimg", _this);
        });
    });

    function imgShow(outerdiv, innerdiv, bigimg, _this){
        var src = _this.attr("src");//获取当前点击的pimg元素中的src属性
        $(bigimg).attr("src", src);//设置#bigimg元素的src属性

        /*获取当前点击图片的真实大小，并显示弹出层及大图*/
        $("<img/>").attr("src", src).load(function(){
            var windowW = $(window).width();//获取当前窗口宽度
            var windowH = $(window).height();//获取当前窗口高度
            var realWidth = this.width;//获取图片真实宽度
            var realHeight = this.height;//获取图片真实高度
            var imgWidth, imgHeight;
            var scale = 0.8;//缩放尺寸，当图片真实宽度和高度大于窗口宽度和高度时进行缩放

            if(realHeight>windowH*scale) {//判断图片高度
                imgHeight = windowH*scale;//如大于窗口高度，图片高度进行缩放
                imgWidth = imgHeight/realHeight*realWidth;//等比例缩放宽度
                if(imgWidth>windowW*scale) {//如宽度扔大于窗口宽度
                    imgWidth = windowW*scale;//再对宽度进行缩放
                }
            } else if(realWidth>windowW*scale) {//如图片高度合适，判断图片宽度
                imgWidth = windowW*scale;//如大于窗口宽度，图片宽度进行缩放
                imgHeight = imgWidth/realWidth*realHeight;//等比例缩放高度
            } else {//如果图片真实高度和宽度都符合要求，高宽不变
                imgWidth = realWidth;
                imgHeight = realHeight;
            }
            $(bigimg).css("width",imgWidth);//以最终的宽度对图片缩放

            var w = (windowW-imgWidth)/2;//计算图片与窗口左边距
            var h = (windowH-imgHeight)/2;//计算图片与窗口上边距
            $(innerdiv).css({"top":h, "left":w});//设置#innerdiv的top和left属性
            $(outerdiv).fadeIn("fast");//淡入显示#outerdiv及.pimg
        });

        $(outerdiv).click(function(){//再次点击淡出消失弹出层
            $(this).fadeOut("fast");
        });
    }

    function Adopt() //同意
    {
        if (confirm("确认同意吗？"))
        {
            $.ajax({
                type:'post',
                data:{"id":document.getElementById("ExperId").innerText,authentication:'2'}, //传送指定的专家id
                dataType:'json',
                url: "/ExperManagement/SetExperApproval/PassOrReject",
                success: function(data) {
                    alert(data.status);
                    parent.close_Details_page();
                },
                error:function(data){
                    alert('提交失败');
                }
            });
        }
    }
    function Refuse() //拒绝
    {
        if (confirm("确认拒绝吗？"))
        {
            $.ajax({
                type:'post',
                data:{"id":document.getElementById("ExperId").innerText,authentication:'3'}, //传送指定的专家id
                dataType:'json',
                url: "/ExperManagement/SetExperApproval/PassOrReject",
                success: function(data) {
                    alert(data.status);
                    parent.close_Details_page();
                },
                error:function(data){
                    alert('提交失败');
                }
            });
        }
    }
    function return_top()//返回上一层
    {
        if (confirm("退出后数据将不会保存！"))
        {
            parent.close_Details_page();
        }
    }

</script>



</body>
</html>